<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Cube.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">objects</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">primitives</span> <span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Papervision3D</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geom</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geom</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">renderables</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Triangle3D</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geom</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">renderables</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Vertex3D</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">log</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PaperLogger</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Number3D</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NumberUV</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proto</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MaterialsList</span>;    

    <span class="ActionScriptASDoc">/**
    * The Cube class lets you create and display flat rectangle objects.
    * &lt;p/&gt;
    * The rectangle can be divided in smaller segments. This is usually done to reduce linear mapping artifacts.
    * &lt;p/&gt;
    * Dividing the Cube in the direction of the perspective or vanishing point, helps to reduce this problem. Perspective distortion dissapears when the Cube is facing straignt to the camera, i.e. it is perpendicular with the vanishing point of the scene.
    */</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">Cube</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">TriangleMesh3D</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptASDoc">/**
        * Number of segments per axis. Defaults to 1.
        */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">segments</span> :<span class="ActionScriptDefault_Text">Number3D</span>;
    
        <span class="ActionScriptASDoc">/**
        * No faces selected.
        */</span>
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">NONE</span>   :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0x00;
    
        <span class="ActionScriptASDoc">/**
        * Front face selection
        */</span>
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">FRONT</span>  :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0x01;
    
        <span class="ActionScriptASDoc">/**
        * Back face selection
        */</span>
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">BACK</span>   :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0x02;
    
        <span class="ActionScriptASDoc">/**
        * Right face selection
        */</span>
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">RIGHT</span>  :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0x04;
    
        <span class="ActionScriptASDoc">/**
        * Left face selection
        */</span>
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">LEFT</span>   :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0x08;
    
        <span class="ActionScriptASDoc">/**
        * Top face selection
        */</span>
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">TOP</span>    :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0x10;
    
        <span class="ActionScriptASDoc">/**
        * Bottom face selection
        */</span>
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">BOTTOM</span> :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0x20;
    
        <span class="ActionScriptASDoc">/**
        * All faces selected.
        */</span>
        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ALL</span>    :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FRONT</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">BACK</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">RIGHT</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">LEFT</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">TOP</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">BOTTOM</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">insideFaces</span>  :<span class="ActionScriptDefault_Text">int</span>;
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">excludeFaces</span> :<span class="ActionScriptDefault_Text">int</span>;
    
        <span class="ActionScriptComment">// ___________________________________________________________________________________________________
</span>        <span class="ActionScriptComment">//                                                                                               N E W
</span>        <span class="ActionScriptComment">// NN  NN EEEEEE WW    WW
</span>        <span class="ActionScriptComment">// NNN NN EE     WW WW WW
</span>        <span class="ActionScriptComment">// NNNNNN EEEE   WWWWWWWW
</span>        <span class="ActionScriptComment">// NN NNN EE     WWW  WWW
</span>        <span class="ActionScriptComment">// NN  NN EEEEEE WW    WW
</span>    
        <span class="ActionScriptASDoc">/**
        * Create a new Cube object.
        * &lt;p/&gt;
        * @param    materials    A MaterialObject3D object that contains the material properties of the object.
        * 
        * Supported materials are: front, back, right, left, top, bottom &amp; all, for example: 
        * 
        *    var materials:MaterialsList = new MaterialsList(
        *    {
        *        all:    new MovieAssetMaterial( "Front", true ), // This is the default material
        *        front:  new MovieAssetMaterial( "Front", true ),
        *        back:   new MovieAssetMaterial( "Back", true ),
        *        right:  new MovieAssetMaterial( "Right", true ),
        *        left:   new MovieAssetMaterial( "Left", true ),
        *        top:    new MovieAssetMaterial( "Top", true ),
        *        bottom: new MovieAssetMaterial( "Bottom", true )
        *    } );
        * 
        * &lt;p/&gt;
        * @param    width            [optional] - Desired width.
        * &lt;p/&gt;
        * @param    depth            [optional] - Desired depth.
        * &lt;p/&gt;
        * @param    height            [optional] - Desired height.
        * &lt;p/&gt;
        * @param    segmentsS        [optional] - Number of segments sagitally (plane perpendicular to width). Defaults to 1.
        * &lt;p/&gt;
        * @param    segmentsT        [optional] - Number of segments transversally (plane perpendicular to depth). Defaults to segmentsS.
        * &lt;p/&gt;
        * @param    segmentsH        [optional] - Number of segments horizontally (plane perpendicular to height). Defaults to segmentsS.
        * &lt;p/&gt;
        * @param    insideFaces        [optional] - Faces that are visible from the inside. Defaults to Cube.NONE.
        *
        * You can add or sustract faces to your selection. For examples: Cube.FRONT+Cube.BACK or Cube.ALL-Cube.Top.
        * 
        * &lt;p/&gt;
        * @param    excludeFaces    [optional] - Faces that will not be created. Defaults to Cube.NONE.
        * 
        * You can add or sustract faces to your selection. For examples: Cube.FRONT+Cube.BACK or Cube.ALL-Cube.Top.
        * 
        * &lt;p/&gt;
        */</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">Cube</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">materials</span>:<span class="ActionScriptDefault_Text">MaterialsList</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">width</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">=</span>500<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">=</span>500<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">=</span>500<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">segmentsS</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>1<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">segmentsT</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>1<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">segmentsH</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>1<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">insideFaces</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">excludeFaces</span>:<span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0 <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">super</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getMaterialByName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"all"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">materials</span>;
            
            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">insideFaces</span>  <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">insideFaces</span>;
            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">excludeFaces</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">excludeFaces</span>;
    
            <span class="ActionScriptDefault_Text">segments</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">segmentsS</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">segmentsT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">segmentsH</span> <span class="ActionScriptBracket/Brace">)</span>;
    
            <span class="ActionScriptDefault_Text">buildCube</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">buildCube</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">width</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">width2</span>  :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">width</span>  <span class="ActionScriptOperator">/</span>2;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">height2</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">/</span>2;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">depth2</span>  :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">depth</span>  <span class="ActionScriptOperator">/</span>2;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">excludeFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">FRONT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">buildPlane</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"front"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"x"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"y"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth2</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">insideFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">FRONT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
    
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">excludeFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">BACK</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">buildPlane</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"back"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"x"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"y"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">depth2</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">insideFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">BACK</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
    
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">excludeFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">RIGHT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">buildPlane</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"right"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"z"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"y"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">width2</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">insideFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">RIGHT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
    
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">excludeFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">LEFT</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">buildPlane</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"left"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"z"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"y"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">width2</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">insideFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">LEFT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
    
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">excludeFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">TOP</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">buildPlane</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"top"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"x"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"z"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height2</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">insideFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">TOP</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
    
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">excludeFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">BOTTOM</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptDefault_Text">buildPlane</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"bottom"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"x"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"z"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">width</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">height2</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">insideFaces</span> <span class="ActionScriptOperator">&amp;</span> <span class="ActionScriptDefault_Text">BOTTOM</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptDefault_Text">mergeVertices</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">t</span>:<span class="ActionScriptDefault_Text">Triangle3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faces</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">t</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">renderCommand</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">create</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createRenderTriangle</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ready</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useRIGHTHANDED</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flipFaces</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    
        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">buildPlane</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mat</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">u</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">v</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">width</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">height</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">depth</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">reverse</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">matInstance</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span>;
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">matInstance</span><span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getMaterialByName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">mat</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">matInstance</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getMaterialByName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"all"</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">PaperLogger</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">warning</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"Required material not found in given materials list. Supported materials are: front, back, right, left, top, bottom &amp; all."</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">matInstance</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">registerObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">// needed for the shaders.
</span>            <span class="ActionScriptComment">// Find w depth axis
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">w</span> :<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">u</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"x"</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">v</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"y"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">u</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"y"</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">v</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"x"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">w</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"z"</span>;
            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">u</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"x"</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">v</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"z"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">u</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"z"</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">v</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"x"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">w</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"y"</span>;
            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">u</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"z"</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">v</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"y"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">u</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"y"</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">v</span><span class="ActionScriptOperator">==</span><span class="ActionScriptString">"z"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">w</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"x"</span>;
    
            <span class="ActionScriptComment">// Mirror
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rev</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">reverse</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptOperator">-</span>1 : 1;
    
            <span class="ActionScriptComment">// Build plane
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridU</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segments</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">u</span> <span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridV</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">segments</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">v</span> <span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridU1</span>   :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">gridU</span> <span class="ActionScriptOperator">+</span> 1;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">gridV1</span>   :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">gridV</span> <span class="ActionScriptOperator">+</span> 1;
    
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vertices</span>   :<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">vertices</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">faces</span>      :<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faces</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">planeVerts</span> :<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">textureU</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">/</span>2;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">textureV</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">/</span>2;
    
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">incU</span>     :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridU</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">incV</span>     :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridV</span>;
    
            <span class="ActionScriptComment">// Vertices
</span>            <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">iu</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">iu</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">gridU1</span>; <span class="ActionScriptDefault_Text">iu</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">iv</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">iv</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">gridV1</span>; <span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vertex</span>:<span class="ActionScriptDefault_Text">Vertex3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Vertex3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptDefault_Text">vertex</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">u</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iu</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">incU</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">textureU</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">rev</span>;
                    <span class="ActionScriptDefault_Text">vertex</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">v</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iv</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">incV</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">textureV</span>;
                    <span class="ActionScriptDefault_Text">vertex</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">w</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">depth</span>;
                    
                    <span class="ActionScriptDefault_Text">vertices</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">vertex</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">planeVerts</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">vertex</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
    
            <span class="ActionScriptComment">// Faces
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">uvA</span> :<span class="ActionScriptDefault_Text">NumberUV</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">uvC</span> :<span class="ActionScriptDefault_Text">NumberUV</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">uvB</span> :<span class="ActionScriptDefault_Text">NumberUV</span>;
    
            <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span>  <span class="ActionScriptDefault_Text">iu</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">iu</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">gridU</span>; <span class="ActionScriptDefault_Text">iu</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span>  <span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">iv</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">gridV</span>; <span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptComment">// Triangle A
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">a</span>:<span class="ActionScriptDefault_Text">Vertex3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">planeVerts</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">iu</span>     <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">gridV1</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">iv</span>     <span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">c</span>:<span class="ActionScriptDefault_Text">Vertex3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">planeVerts</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">iu</span>     <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">gridV1</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">b</span>:<span class="ActionScriptDefault_Text">Vertex3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">planeVerts</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iu</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">gridV1</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">iv</span>     <span class="ActionScriptBracket/Brace">]</span>;
    
                    <span class="ActionScriptDefault_Text">uvA</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NumberUV</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">iu</span>     <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridU</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">iv</span>     <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridV</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">uvC</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NumberUV</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">iu</span>     <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridU</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridV</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">uvB</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NumberUV</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iu</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridU</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">iv</span>     <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridV</span> <span class="ActionScriptBracket/Brace">)</span>;
    
                    <span class="ActionScriptDefault_Text">faces</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Triangle3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">a</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">b</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">matInstance</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">uvA</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">uvB</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">uvC</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
    
                    <span class="ActionScriptComment">// Triangle B
</span>                    <span class="ActionScriptDefault_Text">a</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">planeVerts</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iu</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">gridV1</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">c</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">planeVerts</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iu</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">gridV1</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">iv</span>     <span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">b</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">planeVerts</span><span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">iu</span>     <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">gridV1</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">]</span>;
    
                    <span class="ActionScriptDefault_Text">uvA</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NumberUV</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iu</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridU</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridV</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">uvC</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NumberUV</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iu</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridU</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">iv</span>     <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridV</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">uvB</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NumberUV</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">iu</span>     <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridU</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iv</span><span class="ActionScriptOperator">+</span>1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">gridV</span> <span class="ActionScriptBracket/Brace">)</span>;
    
                    <span class="ActionScriptDefault_Text">faces</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Triangle3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">c</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">a</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">b</span> <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">matInstance</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">uvC</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">uvA</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">uvB</span> <span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">destroy</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mat</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span>;
            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mat</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">mat</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">unregisterObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
