<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>DisplayObject3D.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">objects</span><span class="ActionScriptBracket/Brace">{</span>    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">display</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BlendMode</span>;        <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Papervision3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culling</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FrustumTestMethod</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">data</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UserData</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geom</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">renderables</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Triangle3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">log</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PaperLogger</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">AbstractLightShadeMaterial</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Matrix3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Number3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Quaternion</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proto</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CameraObject3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proto</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DisplayObjectContainer3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proto</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GeometryObject3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proto</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MaterialObject3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proto</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SceneObject3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">render</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">data</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RenderSessionData</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">shaders</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ShadedMaterial</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MaterialsList</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Viewport3D</span>;    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">org</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">papervision3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ViewportLayer</span>;    <span class="ActionScriptASDoc">/**     * The DisplayObject class represents instances of 3D objects that are contained in the scene.    * &lt;p/&gt;    * That includes all objects in the scene, not only those that can be rendered, but also the camera and its target.    * &lt;p/&gt;    * The DisplayObject3D class supports basic functionality like the x, y and z position of an object, as well as rotationX, rotationY, rotationZ, scaleX, scaleY and scaleZ and visible. It also supports more advanced properties of the object such as its transform Matrix3D.    * &lt;p/&gt;    * &lt;p/&gt;    * DisplayObject3D is not an abstract base class; therefore, you can call DisplayObject3D directly. Invoking new DisplayObject() creates a new empty object in 3D space, like when you used createEmptyMovieClip().    *    */</span>    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">DisplayObjectContainer3D</span>    <span class="ActionScriptBracket/Brace">{</span>       <span class="ActionScriptASDoc">/**        * tells Mesh3D's render() method to sort by measuring from the center of a triangle        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MESH_SORT_CENTER</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 1;                <span class="ActionScriptASDoc">/**        * tells Mesh3D's render() method to sort by measuring from the farthest point of a triangle        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MESH_SORT_FAR</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 2;                <span class="ActionScriptASDoc">/**        * tells Mesh3D's render() method to sort by measuring from the closest point of a triangle        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">MESH_SORT_CLOSE</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 3;        <span class="ActionScriptASDoc">/**        * A Matrix3D object containing values that affect the scaling, rotation, and translation of the display object.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">transform</span> :<span class="ActionScriptDefault_Text">Matrix3D</span>;            <span class="ActionScriptASDoc">/**        * [internal-use] A camera transformed Matrix3D object.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">view</span>      :<span class="ActionScriptDefault_Text">Matrix3D</span>;            <span class="ActionScriptASDoc">/**        * World transformation.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">world</span>     :<span class="ActionScriptDefault_Text">Matrix3D</span>;            <span class="ActionScriptASDoc">/**        * [internal-use]        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">faces</span>     :<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptASDoc">/**         * This allows objects faces to have their own containers.         */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">faceLevelMode</span>  :<span class="ActionScriptDefault_Text">Boolean</span>;                <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sortedArray</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptASDoc">/**        * The GeometryObject3D object that contains the 3D definition of this instance.        * &lt;p/&gt;        * When different objects share the same geometry, they become instances. They are the same object, displayed multiple times. Changing the shape of this object changes the shape of all of its instances.        * &lt;p/&gt;        * Instancing an object saves system memory, and is useful to display an object multiple times while maintaining its shape.        * &lt;p/&gt;        * For example, you could create armies and forests full of duplicate objects without needing the memory to handle that much actual geometry. Each instance has its own transform node so it can have its own position, rotation, and scaling.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">geometry</span> :<span class="ActionScriptDefault_Text">GeometryObject3D</span>;            <span class="ActionScriptASDoc">/**        * [internal-use] The average depth of the object faces center. Used internally for z-sorting.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">screenZ</span> :<span class="ActionScriptDefault_Text">Number</span>;            <span class="ActionScriptASDoc">/**        * [internal use] Is this object culled by camera frustum?        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">culled</span>:<span class="ActionScriptDefault_Text">Boolean</span>;                <span class="ActionScriptASDoc">/**        * The list of materials for this instance.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">materials</span>   :<span class="ActionScriptDefault_Text">MaterialsList</span>;                <span class="ActionScriptASDoc">/**        * tells Mesh3D's render() method to compare the measurement choice of the user for a triangle's sorting        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">meshSort</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">MESH_SORT_CENTER</span>;                <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">container</span>            :<span class="ActionScriptDefault_Text">ViewportLayer</span>;            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">alpha</span>                :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 1;        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">blendMode</span>            :<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BlendMode</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">NORMAL</span>;        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">filters</span>                :<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">parentContainer</span>        :<span class="ActionScriptDefault_Text">DisplayObject3D</span>;        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flipLightDirection</span>    :<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">frustumTestMethod</span>    :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">FrustumTestMethod</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BOUNDING_SPHERE</span>;                <span class="ActionScriptASDoc">/**        * [read-only] Indicates the DisplayObjectContainer3D object that contains this display object.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">parent</span> :<span class="ActionScriptDefault_Text">DisplayObjectContainer3D</span>;                <span class="ActionScriptASDoc">/**        * [read-only] The coordinate of the object on screen.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">screen</span> :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptASDoc">/**        * Whether or not the display object is visible.        * &lt;p/&gt;        * A Boolean value that indicates whether the object is projected, transformed and rendered. A value of false will effectively ignore the object. The default value is true.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">visible</span> :<span class="ActionScriptDefault_Text">Boolean</span>;            <span class="ActionScriptASDoc">/**        * An optional object name.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">name</span> :<span class="ActionScriptDefault_Text">String</span>;            <span class="ActionScriptASDoc">/**        * [read-only] Unique id of this instance.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">id</span> :<span class="ActionScriptDefault_Text">int</span>;        <span class="ActionScriptASDoc">/**        * An object that contains user defined properties.        * &lt;p/&gt;        * All properties of the extra field are copied into the new instance. The properties specified with extra are publicly available.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">extra</span> :<span class="ActionScriptDefault_Text">Object</span>; <span class="ActionScriptComment">// = {}; TBD</span>                        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cullTest</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;        <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">useClipping</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">testQuad</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                        <span class="ActionScriptASDoc">/**        * Relative directions.        */</span>        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">FORWARD</span>      :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span>  0<span class="ActionScriptOperator">,</span>  0<span class="ActionScriptOperator">,</span>  1 <span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">BACKWARD</span>     :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span>  0<span class="ActionScriptOperator">,</span>  0<span class="ActionScriptOperator">,</span> <span class="ActionScriptOperator">-</span>1 <span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">LEFT</span>         :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptOperator">,</span>  0<span class="ActionScriptOperator">,</span>  0 <span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">RIGHT</span>        :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span>  1<span class="ActionScriptOperator">,</span>  0<span class="ActionScriptOperator">,</span>  0 <span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">UP</span>           :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span>  0<span class="ActionScriptOperator">,</span>  1<span class="ActionScriptOperator">,</span>  0 <span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DOWN</span>         :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span>  0<span class="ActionScriptOperator">,</span> <span class="ActionScriptOperator">-</span>1<span class="ActionScriptOperator">,</span>  0 <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_tempMatrix</span>    :<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Matrix3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IDENTITY</span>;         <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_tempQuat</span>    :<span class="ActionScriptDefault_Text">Quaternion</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Quaternion</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;         <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_newID</span>        :<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">toDEGREES</span>     :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 180<span class="ActionScriptOperator">/</span><span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PI</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">toRADIANS</span>     :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PI</span><span class="ActionScriptOperator">/</span>180;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">entry_count</span>    :<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0;                <span class="ActionScriptASDoc">/**        * [internal-use]        */</span>        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_transformDirty</span>     :<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_sorted</span>           :<span class="ActionScriptDefault_Text">Array</span>;        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_useOwnContainer</span>    :<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_userData</span>            :<span class="ActionScriptDefault_Text">UserData</span>;                <span class="ActionScriptASDoc">/**        * The scene where the object belongs.        */</span>        <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_scene</span>             :<span class="ActionScriptDefault_Text">SceneObject3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;                    <span class="ActionScriptASDoc">/**         * pre-made Number3Ds and Matrix3Ds for use in the lookAt function         * and others         *          */</span>        <span class="ActionScriptReserved">private</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_position</span>             :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ZERO</span>;        <span class="ActionScriptReserved">private</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_lookatTarget</span>       :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ZERO</span>;        <span class="ActionScriptReserved">private</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_zAxis</span>                 :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ZERO</span>;        <span class="ActionScriptReserved">private</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_xAxis</span>                 :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ZERO</span>;        <span class="ActionScriptReserved">private</span>    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_yAxis</span>                 :<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ZERO</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_rotation</span>            :<span class="ActionScriptDefault_Text">Number3D</span>  <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ZERO</span>;         <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_rotationDirty</span>      :<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_rotationX</span>          :<span class="ActionScriptDefault_Text">Number</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_rotationY</span>              :<span class="ActionScriptDefault_Text">Number</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_rotationZ</span>          :<span class="ActionScriptDefault_Text">Number</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_scaleX</span>             :<span class="ActionScriptDefault_Text">Number</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_scaleY</span>             :<span class="ActionScriptDefault_Text">Number</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_scaleZ</span>             :<span class="ActionScriptDefault_Text">Number</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_scaleDirty</span>         :<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_tempScale</span>            :<span class="ActionScriptDefault_Text">Number3D</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_numClones</span>            :<span class="ActionScriptDefault_Text">uint</span>    <span class="ActionScriptOperator">=</span> 0;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_material</span>            :<span class="ActionScriptDefault_Text">MaterialObject3D</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_rot</span>                :<span class="ActionScriptDefault_Text">Quaternion</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Quaternion</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_qPitch</span>        :<span class="ActionScriptDefault_Text">Quaternion</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Quaternion</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_qYaw</span>        :<span class="ActionScriptDefault_Text">Quaternion</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Quaternion</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_qRoll</span>        :<span class="ActionScriptDefault_Text">Quaternion</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Quaternion</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_localRotationX</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_localRotationY</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;        <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_localRotationZ</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;                <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_autoCalcScreenCoords</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        <span class="ActionScriptASDoc">/**        * Returns an empty DiplayObject3D object positioned in the center of the 3D coordinate system (0, 0 ,0).        */</span>        <span class="ActionScriptReserved">static</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">ZERO</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">useOwnContainer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">_useOwnContainer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">value</span>;            <span class="ActionScriptDefault_Text">setParentContainer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">useOwnContainer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_useOwnContainer</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">userData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">userData</span>:<span class="ActionScriptDefault_Text">UserData</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">_userData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">userData</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">userData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">UserData</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_userData</span>;            <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * An Number that sets the X coordinate of a object relative to the origin of its parent.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">value</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * An Number that sets the Y coordinate of a object relative to the origin of its parent.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">value</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * An Number that sets the Z coordinate of a object relative to the origin of its parent.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">z</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">z</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">value</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**         * A Number3D containing the current x, y, and z of the DisplayObject3D         */</span>                  <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">position</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number3D</span>         <span class="ActionScriptBracket/Brace">{</span>             <span class="ActionScriptDefault_Text">_position</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span><span class="ActionScriptBracket/Brace">)</span>;             <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_position</span>;        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">position</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">n</span>:<span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>         <span class="ActionScriptBracket/Brace">{</span>             <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">n</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span>;             <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">n</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span>;             <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">n</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span>;         <span class="ActionScriptBracket/Brace">}</span>                 <span class="ActionScriptASDoc">/**        * Specifies the rotation around the X axis from its original orientation.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">rotationX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateRotation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationX</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toDEGREES</span> : <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationX</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">rotationX</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rot</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">rot</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">rot</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Specifies the rotation around the Y axis from its original orientation.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">rotationY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateRotation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationY</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toDEGREES</span> : <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationY</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">rotationY</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rot</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">rot</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">rot</span>;                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Specifies the rotation around the Z axis from its original orientation.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">rotationZ</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateRotation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationZ</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toDEGREES</span> : <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationZ</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">rotationZ</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rot</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationZ</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">rot</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">rot</span>;                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptComment">// ___________________________________________________________________ S C A L E</span>            <span class="ActionScriptASDoc">/**        * Sets the 3D scale as applied from the registration point of the object.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">scale</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleY</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleZ</span> <span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span> <span class="ActionScriptOperator">*</span> 100;                <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span>;            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">NaN</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">scale</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">scale</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateRotation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">scale</span> <span class="ActionScriptOperator">/=</span> 100;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleZ</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scale</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Sets the scale along the local X axis as applied from the registration point of the object.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">scaleX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span> <span class="ActionScriptOperator">*</span> 100;            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">scaleX</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">scale</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateRotation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scale</span> <span class="ActionScriptOperator">/</span> 100;            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scale</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Sets the scale along the local Y axis as applied from the registration point of the object.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">scaleY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleY</span> <span class="ActionScriptOperator">*</span> 100;            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleY</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">scaleY</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">scale</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateRotation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scale</span> <span class="ActionScriptOperator">/</span> 100;            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scale</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Sets the scale along the local Z axis as applied from the registration point of the object.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">scaleZ</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleZ</span> <span class="ActionScriptOperator">*</span> 100;            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleZ</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">scaleZ</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">scale</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateRotation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleZ</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scale</span> <span class="ActionScriptOperator">/</span> 100;            <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleZ</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scale</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>                                <span class="ActionScriptASDoc">/**        * The X coordinate of a object relative to the scene coordinate system.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">sceneX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * The Y coordinate of a object relative to the scene coordinate system.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">sceneY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * The Z coordinate of a object relative to the scene coordinate system.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">sceneZ</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span>;        <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptASDoc">/**        * The default material for the object instance. Materials collect data about how objects appear when rendered.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">_material</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">unregisterObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptDefault_Text">_material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">material</span>;            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_material</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">_material</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">registerObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_material</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">scene</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">p_scene</span>:<span class="ActionScriptDefault_Text">SceneObject3D</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptComment">// set scene property</span>            <span class="ActionScriptDefault_Text">_scene</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p_scene</span>;                        <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">child</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_childrenByName</span> <span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scene</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scene</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_scene</span>;            <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">scene</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">SceneObject3D</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_scene</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">autoCalcScreenCoords</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">autoCalculateScreenCoords</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">_autoCalcScreenCoords</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">autoCalculateScreenCoords</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">autoCalcScreenCoords</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_autoCalcScreenCoords</span> ;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Creates a new DisplayObject3D instance. After creating the instance, call the addChild() method of a DisplayObjectContainer3D.        *        * @param    name        [optional] - The name of the newly created object.        * @param    geometry    [optional] - The geometry of the newly created object.        *        * &lt;ul&gt;        * &lt;li&gt;&lt;b&gt;x&lt;/b&gt;&lt;/b&gt;: An Number that sets the X coordinate of a object relative to the scene coordinate system.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;y&lt;/b&gt;: An Number that sets the Y coordinate of a object relative to the scene coordinate system.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;z&lt;/b&gt;: An Number that sets the Z coordinate of a object relative to the scene coordinate system.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;rotationX&lt;/b&gt;: Specifies the rotation around the X axis from its original orientation.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;rotationY&lt;/b&gt;: Specifies the rotation around the Y axis from its original orientation.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;rotationZ&lt;/b&gt;: Specifies the rotation around the Z axis from its original orientation.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;scaleX&lt;/b&gt;: Sets the scale along the local X axis as applied from the registration point of the object.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;scaleY&lt;/b&gt;: Sets the scale along the local Y axis as applied from the registration point of the object.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;scaleZ&lt;/b&gt;: Sets the scale along the local Z axis as applied from the registration point of the object.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;visible&lt;/b&gt;: Whether or not the display object is visible.        * &lt;p/&gt;        * A Boolean value that indicates whether the object is projected, transformed and rendered. A value of false will effectively ignore the object. The default value is true.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;container&lt;/b&gt;: The MovieClip that you draw into when rendering. Use only when the object is rendered in its own unique MovieClip.        * &lt;p/&gt;        * It's Boolean value determines whether the container MovieClip should be cleared before rendering.&lt;/li&gt;        * &lt;p/&gt;        * &lt;li&gt;&lt;b&gt;extra&lt;/b&gt;: An object that contains user defined properties.        * &lt;p/&gt;        * All properties of the extra field are copied into the new instance. The properties specified with extra are publicly available.&lt;/li&gt;        * &lt;/ul&gt;        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">geometry</span>:<span class="ActionScriptDefault_Text">GeometryObject3D</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">super</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">PaperLogger</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">info</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">"DisplayObject3D: "</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culled</span>    <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Matrix3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IDENTITY</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span>     <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Matrix3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IDENTITY</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span>      <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Matrix3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IDENTITY</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span>  0;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span>  0;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">=</span>  0;                        <span class="ActionScriptDefault_Text">rotationX</span> <span class="ActionScriptOperator">=</span> 0;            <span class="ActionScriptDefault_Text">rotationY</span> <span class="ActionScriptOperator">=</span> 0;            <span class="ActionScriptDefault_Text">rotationZ</span> <span class="ActionScriptOperator">=</span> 0;                <span class="ActionScriptDefault_Text">_localRotationX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_localRotationY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_localRotationZ</span> <span class="ActionScriptOperator">=</span> 0;                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scaleDefault</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span><span class="ActionScriptOperator">?</span> 100 : 1;            <span class="ActionScriptDefault_Text">scaleX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scaleDefault</span>;            <span class="ActionScriptDefault_Text">scaleY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scaleDefault</span>;            <span class="ActionScriptDefault_Text">scaleZ</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scaleDefault</span>;            <span class="ActionScriptDefault_Text">_tempScale</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_newID</span><span class="ActionScriptOperator">++</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">_numClones</span> <span class="ActionScriptOperator">=</span> 0;                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">addGeometry</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptBracket/Brace">}</span>                    <span class="ActionScriptASDoc">/**        * Adds a child DisplayObject3D instance to this DisplayObjectContainer instance.        *        * [TODO: If you add a child object that already has a different display object container as a parent, the object is removed from the child list of the other display object container.]        *        * @param    child    The DisplayObject3D instance to add as a child of this DisplayObjectContainer3D instance.        * @param    name    An optional name of the child to add or create. If no name is provided, the child name will be used.        * @return    The DisplayObject3D instance that you have added or created.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">override</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">child</span> :<span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">child</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">super</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scene</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scene</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">scene</span>;            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useOwnContainer</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                    <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">parentContainer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">child</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Adds a geometry definition to the instance.        *        * A geometry describes the visual shape and appearance of an object in a scene.        *        * @param    geometry    A geometry definition.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addGeometry</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">geometry</span>:<span class="ActionScriptDefault_Text">GeometryObject3D</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">geometry</span>;            <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**         * Clones this object.         *          * @return    The cloned DisplayObject3D.         */</span>         <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"_"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_numClones</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">object</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span>;                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">object</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ready</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;            <span class="ActionScriptBracket/Brace">}</span>                        <span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">copyTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">child</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">object</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;                            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">object</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Gets the distance to the position of the given object.        *        * @param    obj        The display object to measure the distance to.        * @return    The distance to the registration point of the given object.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">distanceTo</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">x</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">z</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span>;                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sqrt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">z</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Evaluates the display object to see if it overlaps or intersects with the point specified by the x, y and z parameters.        * &lt;p/&gt;        * The x, y and z parameters specify a point in the coordinate space of the instance parent object, not the scene (unless that parent object is the scene).        *        * @param    x    The x coordinate to test against this object.        * @param    y    The y coordinate to test against this object.        * @param    z    The z coordinate to test against this object.        * @return    true if the display object overlaps or intersects with the specified point; false otherwise.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">hitTestPoint</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">x</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">y</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">z</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dx</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">x</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dy</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">y</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dz</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">z</span>;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">d2</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">dx</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">dx</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">dy</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">dy</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">dz</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">dz</span>;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sA</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">boundingSphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">maxDistance</span> : 0;                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">sA</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">d2</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Evaluates the display object to see if it overlaps or intersects with the obj display object.        *        * @param    obj     The display object to test against.        * @return    true if the display objects intersect; false if not.        */</span>        <span class="ActionScriptComment">// TODO: Use group boundingSphere</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">hitTestObject</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">multiplier</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">=</span>1 <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Boolean</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dx</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dy</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dz</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span>;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">d2</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">dx</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">dx</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">dy</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">dy</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">dz</span><span class="ActionScriptOperator">*</span><span class="ActionScriptDefault_Text">dz</span>;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sA</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">boundingSphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">maxDistance</span> : 0;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sB</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">?</span>  <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">boundingSphere</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">maxDistance</span>  : 0;                        <span class="ActionScriptDefault_Text">sA</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">sA</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">multiplier</span>;                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">sA</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">sB</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">d2</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptComment">// ___________________________________________________________________________________________________</span>        <span class="ActionScriptComment">//                                                                                   M A T E R I A L S</span>            <span class="ActionScriptASDoc">/**        * Returns the material that exists with the specified name in the materials list.        * &lt;/p&gt;        * If more that one material object has the specified name, the method returns the first material object in the materials list.        * &lt;/p&gt;        * @param    name    The name of the material to return.        * @return    The material object with the specified name.        */</span>        <span class="ActionScriptComment">// TODO: Recursive</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getMaterialByName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getMaterialByName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptReserved">null</span>;            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">material</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">else</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">child</span> :<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_childrenByName</span> <span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptBracket/Brace">{</span>                    <span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getMaterialByName</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptBracket/Brace">)</span>;                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">material</span>;                <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">null</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Returns a string value with the list of material names of the materials list.        *        * @return    A string.        */</span>        <span class="ActionScriptComment">// TODO: Recursive</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">materialsList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">String</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">list</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span> <span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">list</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n"</span>;                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">child</span> :<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_childrenByName</span> <span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materialsByName</span> <span class="ActionScriptBracket/Brace">)</span>                    <span class="ActionScriptDefault_Text">list</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptString">"+ "</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n"</span>;            <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">list</span>;        <span class="ActionScriptBracket/Brace">}</span>                        <span class="ActionScriptASDoc">/**         * Replaces a material by its name.         *          * @param    material         * @param    name         * @return         */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">replaceMaterialByName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">name</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptReserved">return</span>;                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">existingMaterial</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getMaterialByName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">existingMaterial</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptReserved">return</span>;                            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptDefault_Text">existingMaterial</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">material</span>;            <span class="ActionScriptDefault_Text">existingMaterial</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeMaterial</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">existingMaterial</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">materials</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addMaterial</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">material</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">name</span><span class="ActionScriptBracket/Brace">)</span>;                            <span class="ActionScriptDefault_Text">updateMaterials</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">existingMaterial</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**         * Sets the material for a child DisplayObject3D.         *          * @param child        A child DisplayObject3D of this DAE.         * @param material    The new material for the child.         * @param existingMaterial Optional existing material to be replaced.         */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setChildMaterial</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">child</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">existingMaterial</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>         <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">child</span><span class="ActionScriptBracket/Brace">)</span>                 <span class="ActionScriptReserved">return</span>;                            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">existingMaterial</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptDefault_Text">existingMaterial</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">material</span>;                            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faces</span><span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">triangle</span>:<span class="ActionScriptDefault_Text">Triangle3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faces</span> <span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptBracket/Brace">{</span>                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">existingMaterial</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">triangle</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptDefault_Text">existingMaterial</span><span class="ActionScriptBracket/Brace">)</span>                        <span class="ActionScriptDefault_Text">triangle</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">material</span>;                <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**         * Sets the material for a child DisplayObject3D by the child's name.         *          * @param childName The name of the DisplayObject3D.         * @param material    The new material for the child.         */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setChildMaterialByName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">childName</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">material</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>         <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">setChildMaterial</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">getChildByName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">childName</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">material</span><span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptBracket/Brace">}</span>                                <span class="ActionScriptASDoc">/**         *          * @param    do3d         * @param    existingMaterial         * @param    newMaterial         */</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateMaterials</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">do3d</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">existingMaterial</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">newMaterial</span>:<span class="ActionScriptDefault_Text">MaterialObject3D</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">existingMaterial</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">unregisterObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptComment">// register shaded materials with its object</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">newMaterial</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">AbstractLightShadeMaterial</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">newMaterial</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ShadedMaterial</span><span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">newMaterial</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">registerObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>                                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptDefault_Text">existingMaterial</span> <span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">newMaterial</span>;                                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faces</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faces</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">triangle</span>:<span class="ActionScriptDefault_Text">Triangle3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faces</span> <span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptBracket/Brace">{</span>                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">triangle</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptDefault_Text">existingMaterial</span> <span class="ActionScriptBracket/Brace">)</span>                        <span class="ActionScriptDefault_Text">triangle</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">material</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">newMaterial</span>;                <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptBracket/Brace">}</span>                        <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">child</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">updateMaterials</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">existingMaterial</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">newMaterial</span><span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptBracket/Brace">}</span>                                    <span class="ActionScriptASDoc">/**        * [internal-use] Projects three dimensional coordinates onto a two dimensional plane to simulate the relationship of the camera to subject.        * &lt;p/&gt;        * This is the first step in the process of representing three dimensional shapes two dimensionally.        *         * @param    parent    The DisplayObject3D object that contains this display object.        * @param    renderSessionData Data for the current render.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">project</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span> :<span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">renderSessionData</span>:<span class="ActionScriptDefault_Text">RenderSessionData</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culler</span> <span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span> <span class="ActionScriptBracket/Brace">)</span>                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                <span class="ActionScriptReserved">else</span>                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culler</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">testObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&lt;</span> 0<span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culled</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                    <span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">renderStatistics</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culledObjects</span> <span class="ActionScriptOperator">++</span> ;                    <span class="ActionScriptReserved">return</span> 0;                <span class="ActionScriptBracket/Brace">}</span>                         <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">else</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;            <span class="ActionScriptBracket/Brace">}</span>                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptOperator">!==</span> <span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span> <span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useProjectionMatrix</span><span class="ActionScriptBracket/Brace">)</span>                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply4x4</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">else</span>                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">else</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useProjectionMatrix</span><span class="ActionScriptBracket/Brace">)</span>                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply4x4</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">eye</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">else</span>                    <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">eye</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_autoCalcScreenCoords</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">calculateScreenCoords</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">renderSessionData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">screenZs</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">children</span> :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;                                <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">child</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_childrenByName</span> <span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptBracket/Brace">{</span>                    <span class="ActionScriptDefault_Text">screenZs</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">child</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">project</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">renderSessionData</span> <span class="ActionScriptBracket/Brace">)</span>;                    <span class="ActionScriptDefault_Text">children</span><span class="ActionScriptOperator">++</span>;                <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">screenZ</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">screenZs</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">children</span>;        <span class="ActionScriptBracket/Brace">}</span>                                <span class="ActionScriptASDoc">/**         *          */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">calculateScreenCoords</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">camera</span> :<span class="ActionScriptDefault_Text">CameraObject3D</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useProjectionMatrix</span><span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vx</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vy</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vz</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">w</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">vx</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n41</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">vy</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n42</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">vz</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n43</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n44</span>;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vpw</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewport</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">/</span> 2;                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vph</span>    :<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewport</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">/</span> 2;                                <span class="ActionScriptDefault_Text">screen</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vx</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n11</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">vy</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n12</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">vz</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n13</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">w</span>;                <span class="ActionScriptDefault_Text">screen</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vx</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n21</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">vy</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n22</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">vz</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n23</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">w</span>;                <span class="ActionScriptDefault_Text">screen</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">vx</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n31</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">vy</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n32</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">vz</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n33</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span>;                                <span class="ActionScriptDefault_Text">screen</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">*=</span> <span class="ActionScriptDefault_Text">vpw</span>;                <span class="ActionScriptDefault_Text">screen</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">*=</span> <span class="ActionScriptDefault_Text">vph</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">else</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">persp</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">focus</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">zoom</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">camera</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">focus</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">screen</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">persp</span>;                <span class="ActionScriptDefault_Text">screen</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">persp</span>;                <span class="ActionScriptDefault_Text">screen</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">view</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span>;            <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Translate the display object in the direction it is facing, i.e. it's positive Z axis.        *        * @param    distance    The distance that the object should move forward.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">moveForward</span>  <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">translate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">FORWARD</span>  <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Translate the display object in the opposite direction it is facing, i.e. it's negative Z axis.        *        * @param    distance    The distance that the object should move backward.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">moveBackward</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">translate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">BACKWARD</span> <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Translate the display object lateraly, to the left of the direction it is facing, i.e. it's negative X axis.        *        * @param    distance    The distance that the object should move left.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">moveLeft</span>     <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">translate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">LEFT</span>     <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Translate the display object lateraly, to the right of the direction it is facing, i.e. it's positive X axis.        *        * @param    distance    The distance that the object should move right.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">moveRight</span>    <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">translate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">RIGHT</span>    <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Translate the display object upwards, with respect to the direction it is facing, i.e. it's positive Y axis.        *        * @param    distance    The distance that the object should move up.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">moveUp</span>       <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">translate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">UP</span>       <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Translate the display object downwards, with respect to the direction it is facing, i.e. it's negative Y axis.        *        * @param    distance    The distance that the object should move down.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">moveDown</span>     <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">translate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">DOWN</span>     <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptComment">// ___________________________________________________________________________________________________</span>        <span class="ActionScriptComment">//                                                                   L O C A L   T R A N S L A T I O N</span>            <span class="ActionScriptASDoc">/**        * Move the object along a given direction.        *        * @param    distance    The distance that the object should travel.        * @param    axis        The direction that the object should move towards.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">translate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">distance</span>:<span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">axis</span>:<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vector</span>:<span class="ActionScriptDefault_Text">Number3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">axis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">clone</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">Matrix3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rotateAxis</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">vector</span> <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">distance</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">vector</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">distance</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">vector</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">distance</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">vector</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptComment">// ___________________________________________________________________________________________________</span>        <span class="ActionScriptComment">//                                                                         L O C A L   R O T A T I O N</span>                <span class="ActionScriptASDoc">/**        * Rotate the display object around its lateral or transverse axis an axis running from the pilot's left to right in piloted aircraft, and parallel to the wings of a winged aircraft; thus the nose pitches up and the tail down, or vice-versa.        *        * @param    angle    The angle to rotate.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">localRotationX</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">angle</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">angle</span>;            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">_qPitch</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFromAxisAngle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n11</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n21</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n31</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_localRotationX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply3x3</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_qPitch</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matrix</span> <span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptDefault_Text">_localRotationX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">angle</span>;                        <span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">localRotationX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">_localRotationX</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toDEGREES</span> : <span class="ActionScriptDefault_Text">_localRotationX</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Rotate the display object around about the vertical axis an axis drawn from top to bottom.        *        * @param    angle    The angle to rotate.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">localRotationY</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">angle</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">angle</span>;            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">_qYaw</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFromAxisAngle</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n12</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n22</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n32</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_localRotationY</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply3x3</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_qYaw</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptDefault_Text">_localRotationY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">angle</span>;                        <span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">localRotationY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">_localRotationY</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toDEGREES</span> : <span class="ActionScriptDefault_Text">_localRotationY</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Rotate the display object around the longitudinal axis an axis drawn through the body of the vehicle from tail to nose in the normal direction of flight, or the direction the object is facing.        *        * @param    angle        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">localRotationZ</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">angle</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">angle</span>;                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">_qRoll</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFromAxisAngle</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n13</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n23</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n33</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_localRotationZ</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply3x3</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_qRoll</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptDefault_Text">_localRotationZ</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">angle</span>;                        <span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">localRotationZ</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">Number</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">_localRotationZ</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toDEGREES</span> : <span class="ActionScriptDefault_Text">_localRotationZ</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Rotate the display object around its lateral or transverse axis an axis running from the pilot's left to right in piloted aircraft, and parallel to the wings of a winged aircraft; thus the nose pitches up and the tail down, or vice-versa.        *        * @param    angle    The angle to rotate.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">pitch</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">angle</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">angle</span>;            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">_qPitch</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFromAxisAngle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n11</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n21</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n31</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply3x3</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_qPitch</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matrix</span> <span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">_localRotationX</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">angle</span>;                        <span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Rotate the display object around about the vertical axis an axis drawn from top to bottom.        *        * @param    angle    The angle to rotate.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">yaw</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">angle</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">angle</span>;            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">_qYaw</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFromAxisAngle</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n12</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n22</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n32</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply3x3</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_qYaw</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptDefault_Text">_localRotationY</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">angle</span>;                        <span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptASDoc">/**        * Rotate the display object around the longitudinal axis an axis drawn through the body of the vehicle from tail to nose in the normal direction of flight, or the direction the object is facing.        *        * @param    angle        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">roll</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">angle</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useDEGREES</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span> : <span class="ActionScriptDefault_Text">angle</span>;                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptDefault_Text">_qRoll</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFromAxisAngle</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n13</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n23</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n33</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">angle</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply3x3</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_qRoll</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptDefault_Text">_localRotationZ</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">angle</span>;                        <span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Make the object look at a specific position.        *        * @param    targetObject    Object to look at.        * @param    upAxis            The vertical axis of the universe. Normally the positive Y axis.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">lookAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">targetObject</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">upAxis</span>:<span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">parent</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span>;                        <span class="ActionScriptComment">// TODO:</span>            <span class="ActionScriptComment">// For lookAt() to work *before* any render we need to calc #world, as</span>            <span class="ActionScriptComment">// #world maybe not set (ie: project() wasn't called yet).</span>            <span class="ActionScriptComment">// We need a better 'dirty' system.</span>            <span class="ActionScriptComment">//</span>            <span class="ActionScriptComment">// Also camera's are now handled differently due to current code.</span>            <span class="ActionScriptComment">// Camera's should act as default DO3D's</span>                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">CameraObject3D</span><span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">_position</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">else</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span>;                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">)</span>                    <span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">else</span>                    <span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">copy</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">_position</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">targetObject</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">CameraObject3D</span><span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">_lookatTarget</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">else</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span>;                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">)</span>                    <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">else</span>                    <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">copy</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">_lookatTarget</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">targetObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">world</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span> <span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>                            <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">copyFrom</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_lookatTarget</span><span class="ActionScriptBracket/Brace">)</span>;             <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">minusEq</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_position</span><span class="ActionScriptBracket/Brace">)</span>;             <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">normalize</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">modulo</span> <span class="ActionScriptOperator">&gt;</span> 0.1 <span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">_xAxis</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">cross</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">upAxis</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">UP</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_xAxis</span> <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">_xAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">normalize</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                    <span class="ActionScriptDefault_Text">_yAxis</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">cross</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_xAxis</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_yAxis</span> <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">_yAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">normalize</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">look</span>  :<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span>;                <span class="ActionScriptComment">// scale fix for lookAt()</span>                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n11</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">_xAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleX</span>;                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n21</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">_xAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleX</span>;                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n31</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">_xAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleX</span>;                                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n12</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_yAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleY</span>;                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n22</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_yAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleY</span>;                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n32</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">_yAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleY</span>;                                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n13</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleZ</span>;                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n23</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleZ</span>;                <span class="ActionScriptDefault_Text">look</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n33</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">_zAxis</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">_scaleZ</span>;                <span class="ActionScriptDefault_Text">_localRotationX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_localRotationY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_localRotationZ</span> <span class="ActionScriptOperator">=</span> 0;                                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;            <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptReserved">else</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">PaperLogger</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">error</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"lookAt error"</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Copies the position information (x, y and z coordinates) from another object or Matrix3D.        *        * @param    reference    A DisplayObject3D or Matrix3D object to copy the position from.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">copyPosition</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">reference</span>:<span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">trans</span>  :<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">matrix</span> :<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reference</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">reference</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> : <span class="ActionScriptDefault_Text">reference</span>;                <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span>;            <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span>;            <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptASDoc">/**        * Copies the transformation information (position, rotation and scale) from another object or Matrix3D.        *        * @param    reference    A DisplayObject3D or Matrix3D object to copy the position from.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">copyTransform</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">reference</span>:<span class="ActionScriptOperator">*</span> <span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reference</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptBracket/Brace">)</span>            <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">do3d</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reference</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                    <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptBracket/Brace">}</span>                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">trans</span>  :<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span>;            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">matrix</span> :<span class="ActionScriptDefault_Text">Matrix3D</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">reference</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">reference</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span> : <span class="ActionScriptDefault_Text">reference</span>;                <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n11</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n11</span>;        <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n12</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n12</span>;            <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n13</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n13</span>;        <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n14</span>;                <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n21</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n21</span>;        <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n22</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n22</span>;            <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n23</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n23</span>;        <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n24</span>;                <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n31</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n31</span>;        <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n32</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n32</span>;            <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n33</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n33</span>;        <span class="ActionScriptDefault_Text">trans</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">matrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n34</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span>  <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;        <span class="ActionScriptBracket/Brace">}</span>            <span class="ActionScriptComment">// ___________________________________________________________________________________________________</span>            <span class="ActionScriptASDoc">/**        * Returns a string value representing the three-dimensional position values of the display object instance.        *        * @return    A string.        */</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">override</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>: <span class="ActionScriptDefault_Text">String</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">': x:'</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">round</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">' y:'</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">round</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">' z:'</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">Math</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">round</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span><span class="ActionScriptBracket/Brace">)</span>;        <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createViewportLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">viewport</span>:<span class="ActionScriptDefault_Text">Viewport3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">recurse</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">ViewportLayer</span>        <span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptComment">//Register it here under the correct viewport.</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">ViewportLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">viewport</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getChildLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>;                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">recurse</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">addChildrenToLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptBracket/Brace">)</span>;                            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">layer</span>;                            <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addChildrenToLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">do3d</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">ViewportLayer</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addDisplayObject3D</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addChildrenToLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setParentContainer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">assign</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">assign</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">parent</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptBracket/Brace">)</span>                <span class="ActionScriptDefault_Text">parentContainer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parent</span>;                            <span class="ActionScriptReserved">for each</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">do3d</span>:<span class="ActionScriptDefault_Text">DisplayObject3D</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">{</span>                                <span class="ActionScriptDefault_Text">do3d</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setParentContainer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">assign</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptBracket/Brace">}</span>        <span class="ActionScriptBracket/Brace">}</span>                    <span class="ActionScriptASDoc">/**        * [internal-use] Updates the transform Matrix3D with the current rotation and scale values.        */</span>        <span class="ActionScriptComment">// TODO OPTIMIZE (HIGH)</span>        <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateTransform</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>                <span class="ActionScriptDefault_Text">_rot</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setFromEuler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">_rotationY</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_rotationZ</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_rotationX</span><span class="ActionScriptBracket/Brace">)</span>;            <span class="ActionScriptComment">// Rotation</span>            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">copy3x3</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">_rot</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matrix</span> <span class="ActionScriptBracket/Brace">)</span>;                <span class="ActionScriptComment">// Scale</span>            <span class="ActionScriptDefault_Text">_tempMatrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">reset</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;             <span class="ActionScriptDefault_Text">_tempMatrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n11</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleX</span>;            <span class="ActionScriptDefault_Text">_tempMatrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n22</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleY</span>;            <span class="ActionScriptDefault_Text">_tempMatrix</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">n33</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_scaleZ</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">calculateMultiply</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_tempMatrix</span> <span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptDefault_Text">_transformDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        <span class="ActionScriptBracket/Brace">}</span>                <span class="ActionScriptComment">// Update rotation values</span>        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateRotation</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>        <span class="ActionScriptBracket/Brace">{</span>                        <span class="ActionScriptDefault_Text">_tempScale</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">_scaleX</span> <span class="ActionScriptOperator">*</span> 100 : <span class="ActionScriptDefault_Text">_scaleX</span>;            <span class="ActionScriptDefault_Text">_tempScale</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">_scaleY</span> <span class="ActionScriptOperator">*</span> 100 : <span class="ActionScriptDefault_Text">_scaleY</span>;            <span class="ActionScriptDefault_Text">_tempScale</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Papervision3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">usePERCENT</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">_scaleZ</span> <span class="ActionScriptOperator">*</span> 100 : <span class="ActionScriptDefault_Text">_scaleZ</span>;                        <span class="ActionScriptDefault_Text">_rotation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Matrix3D</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">matrix2euler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">transform</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_rotation</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">_tempScale</span><span class="ActionScriptBracket/Brace">)</span>;                        <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_rotation</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_rotation</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span>;            <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationZ</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">_rotation</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">z</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">toRADIANS</span>;                <span class="ActionScriptReserved">this</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">_rotationDirty</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;        <span class="ActionScriptBracket/Brace">}</span>    <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
